<!--MAIN WRAPPER-->
<div ng-show="!vm.deleteClicked && !vm.retireClicked">

    <!--Query field and search button-->
    <div class="search-input" align="center" ng-show="vm.isSearchPanelVisible()">
        <input class="field-display ui-autocomplete-input" id="inputNode" type="text" ng-model="vm.query"
               ng-change="vm.timeoutRefresh()" autocomplete="off">
        <button id="searchButton" name="searchButton" ng-click="vm.getData()">{{"Search" | translate}}</button>
    </div>

    <!--Empty query notification-->
    <div align="center">
        <span ng-show="vm.notificationEmptyQuery()">{{"Search.type" | translate}}</span>
    </div>

    <!--No entries found notification-->
    <div align="center">
        <span ng-show="vm.notificationNoEntriesFound()">{{"Search.notfound" | translate}} <b>{{vm.query}}</b></span>
    </div>

    <!--Initial loading notification-->
    <div align="center" ng-show="vm.notificationLoading()">
        <img ng-src="{{vm.logo}}" width="64" height="64">
        <br>
        <span><b>{{"Loading" | translate}}</b></span>
    </div>

    <!--TABLE TYPE-->
    <table ng-show="vm.showTable()">
        <thead>
        <tr>
            <!--Main data header-->
            <th ng-repeat="column in vm.columns">
                {{column.label | translate}}
            </th>

            <!--Actions header-->
            <th ng-show="vm.getActions().length">
                {{"Actions" | translate}}
            </th>
        </tr>
        </thead>
        <tbody>
        <tr ng-if="!vm.showTableContent()&&!vm.noResults">
            <td colspan="{{vm.columns.length + 1}}" align="center" style="height:300px;background:#fafafa">
                <img ng-src="{{vm.logo}}" width="64" height="64">
                <br>
                <span><b>{{"Loading" | translate}}</b></span>
            </td>
        </tr>
        <tr ng-if="vm.noResults && !vm.enableSearch">
            <td colspan="{{vm.columns.length + 1}}" align="center" style="height:300px;background:#fafafa">
                <span>No results found!</span>
            </td>
        </tr>
        <tr ng-if="vm.showTableContent()"
            ng-repeat="data in vm.items.slice(vm.sliceFrom(),vm.sliceTo()) | orderBy: 'retired'">

            <!--Main data-->
            <th ng-repeat="column in vm.columns">

                <div ng-show="vm.isTextClickable">
                    <a ng-href="{{vm.resolveRedirectLinks(data)}}" ng-show="data.retired">
                        <del>{{data[column.property]}}</del>
                    </a>
                    <a ng-href="{{vm.resolveRedirectLinks(data)}}" ng-show="!data.retired">
                        {{data[column.property]}}
                    </a>
                </div>
                <div ng-show="!vm.isTextClickable">
                    <div ng-show="data.retired">
                        <del>{{data[column.property]}}</del>
                    </div>
                    <div ng-show="!data.retired">
                        {{data[column.property]}}
                    </div>
                </div>
            </th>

            <!--Action buttons-->
            <th ng-show="vm.getActions().length">
                <a ng-repeat="action in vm.actionsBackup" ng-show="vm.resolveRetireButtons(data, action.action)">
                    <i ng-class="vm.icon[action.action]" titgile="{{action.label}}" ng-click="vm.performAction(data, action.action)">
                    </i>
                </a>
            </th>
        </tr>
        </tbody>
    </table>

    <!--LIST TYPE-->
    <ul ng-show="vm.showList()">
        <li ng-repeat="data in vm.items.slice(vm.sliceFrom(),vm.sliceTo()) | orderBy:'retired'">
            <div valign="top" ng-show="vm.isTextClickable">
                <a ng-href="{{vm.resolveRedirectLinks(data)}}">

                    <!--Main data-->
                    <div ng-repeat="column in vm.columns">
                        <strong>
                            <span ng-show="data.retired"><del>{{data[column.property]}}</del></span>
                            <span ng-show="!data.retired">{{data[column.property]}}</span>
                        </strong>
                    </div>
                </a>
            </div>
            <div valign="top" ng-show="!vm.isTextClickable">
                    <!--Main data-->
                    <div ng-repeat="column in vm.columns">
                        <strong>
                            <span ng-show="data.retired"><del>{{data[column.property]}}</del></span>
                            <span ng-show="!data.retired">{{data[column.property]}}</span>
                        </strong>
                    </div>
            </div>
        </li>
    </ul>

    <!--Nav buttons-->
    <div ng-show="vm.isButtonPanelVisible() && vm.isWholeNavigationPanelVisible()" align="center">


        <!--Entries count selection-->
        <div align="left" style="padding: 10px;display: inline-block;float: left;">
            {{"Show" | translate}}
            <select ng-model="vm.entriesPerPage" ng-click="vm.firstPage()" ng-options="option.value for option in vm.entriesPerPageOptions track by option.value">

            </select>
            {{"Entries" | translate}}
        </div>

        <!--Data info-->
        <div align="center" style="padding: 10px;display: inline-block;">
            {{"Found" | translate}} <b>{{vm.data.length}}</b> {{"Entries" | translate}}
        </div>

        <div align="right" style="padding: 10px;display:inline-block;float:right;">
            <a class="nav-button" ng-show="vm.isFirstPagePossible()" ng-click="vm.firstPage()">{{"FirstPage" | translate}}</a>
            <a class="nav-button" ng-show="vm.isPrevPagePossible()" ng-click="vm.prevPage()">{{"PreviousPage" | translate}}</a>
            <span ng-repeat="i in vm.pageRange()">
                <a ng-class="'nav-button '+(i===vm.page ? 'nav-button-selected':'')"
                   ng-click="vm.page=vm.page+(i-vm.page)">
                    &nbsp;{{i}}
                </a>
            </span>
            <a class="nav-button" ng-show="vm.isNextPagePossible()" ng-click="vm.nextPage()">{{"NextPage" | translate}}</a>
            <a class="nav-button" ng-show="vm.isLastPagePossible()" ng-click="vm.lastPage()">{{"LastPage" | translate}}</a>
        </div>
    </div>

    <!--Loading more pages notification-->
    <div align="center" ng-show="vm.isSecondLoaderNotificationVisible()">
        <b>{{"Loading.morePages" | translate}}</b>
    </div>
</div>

<!--RETIRE/DELETE ALERTS-->
<delete-alert ng-show="vm.deleteClicked" on-update="vm.updateDeleteConfirmation(isConfirmed)" item-name="vm.deleteItem.name"></delete-alert>
<retire-alert ng-show="vm.retireClicked" on-update="vm.updateRetireConfirmation(retireReason, isConfirmed)" item-name="vm.retireItem.name"></retire-alert>