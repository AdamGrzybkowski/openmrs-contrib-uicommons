<!--MAIN WRAPPER-->
<div ng-show="!vm.deleteClicked && !vm.retireClicked">

    <!--Query field and search button-->
    <div class="search-input" align="center" ng-show="vm.isSearchPanelVisible()">
        <input class="field-display ui-autocomplete-input" id="inputNode" type="text" ng-model="vm.query"
               ng-change="vm.timeoutRefresh()">
        <button id="searchButton" name="searchButton" ng-click="vm.getData()">Search</button>
    </div>

    <!--Empty query notification-->
    <div align="center">
        <span ng-show="vm.notificationEmptyQuery()">Type query to search data</span>
    </div>

    <!--No entries found notification-->
    <div align="center">
        <span ng-show="vm.notificationNoEntriesFound()">No entries found for <b>{{vm.query}}</b></span>
    </div>

    <!--Initial loading notification-->
    <div align="center" ng-show="vm.notificationLoading()">
        <img ng-src="{{vm.logo}}" width="64" height="64">
        <br>
        <span><b>Loading...</b></span>
    </div>

    <!--TABLE TYPE-->
    <table ng-show="vm.showTable()">
        <thead>
        <tr>

            <!--Main data header-->
            <th ng-repeat="column in vm.columns">
                {{column.label}}
            </th>

            <!--Actions header-->
            <th ng-show="vm.getActions().length">
                Actions
            </th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="data in vm.items.slice(vm.sliceFrom(),vm.sliceTo()) | orderBy: 'retired'">

            <!--Main data-->
            <th ng-repeat="column in vm.columns">

                <div ng-show="vm.isTextClickable">
                    <a ng-href="{{vm.resolveRedirectLinks(data)}}" ng-show="data.retired">
                        <del>{{data[column.property]}}</del>
                    </a>
                    <a ng-href="{{vm.resolveRedirectLinks(data)}}" ng-show="!data.retired">
                        {{data[column.property]}}
                    </a>
                </div>
                <div ng-show="!vm.isTextClickable">
                    <div ng-show="data.retired">
                        <del>{{data[column.property]}}</del>
                    </div>
                    <div ng-show="!data.retired">
                        {{data[column.property]}}
                    </div>
                </div>
            </th>

            <!--Action buttons-->
            <th ng-show="vm.getActions().length">
                <a ng-repeat="action in vm.actionsBackup" ng-show="vm.resolveRetireButtons(data, action.action)">
                    <i ng-class="vm.icon[action.action]" titgile="{{action.label}}" ng-click="vm.performAction(data, action.action)">
                    </i>
                </a>
            </th>
        </tr>
        </tbody>
    </table>

    <!--LIST TYPE-->
    <ul ng-show="vm.showList()">
        <li ng-repeat="data in vm.items.slice(vm.sliceFrom(),vm.sliceTo()) | orderBy:'retired'">
            <div valign="top" ng-show="vm.isTextClickable">
                <a ng-href="{{vm.resolveRedirectLinks(data)}}">

                    <!--Main data-->
                    <div ng-repeat="column in vm.columns">
                        <strong>
                            <span ng-show="data.retired"><del>{{data[column.property]}}</del></span>
                            <span ng-show="!data.retired">{{data[column.property]}}</span>
                        </strong>
                    </div>
                </a>
            </div>
            <div valign="top" ng-show="!vm.isTextClickable">
                    <!--Main data-->
                    <div ng-repeat="column in vm.columns">
                        <strong>
                            <span ng-show="data.retired"><del>{{data[column.property]}}</del></span>
                            <span ng-show="!data.retired">{{data[column.property]}}</span>
                        </strong>
                    </div>
            </div>
        </li>
    </ul>
    <br>

    <!--Nav buttons-->
    <div ng-show="vm.isButtonPanelVisible() && vm.isWholeNavigationPanelVisible()" align="center">
        <button ng-disabled="!vm.isFirstPagePossible()" ng-click="vm.firstPage()">First Page</button>
        <button ng-disabled="!vm.isPrevPagePossible()" ng-click="vm.prevPage()">Previous Page</button>
        <button ng-disabled="!vm.isNextPagePossible()" ng-click="vm.nextPage()">Next Page</button>
        <button ng-disabled="!vm.isLastPagePossible()" ng-click="vm.lastPage()">Last Page</button>

        <!--Data info-->
        <div align="center">
            Page <b>{{vm.page}}/{{vm.totalPages()}}</b>
            <br>
            Found <b>{{vm.data.length}}</b> entries
            <br>
            Displaying <b>{{vm.entriesPerPage}}</b> entries per page
        </div>

        <!--Entries count selection-->
        <div align="left">
            Show
            <select size="1" ng-model="vm.entriesPerPage" ng-click="vm.firstPage()">
                <option ng-click="vm.firstPage()" selected="selected" value="5">5</option>
                <option ng-click="vm.firstPage()" value="10">10</option>
                <option ng-click="vm.firstPage()" value="25">25</option>
                <option ng-click="vm.firstPage()" value="50">50</option>
            </select>
            Entries
        </div>
    </div>

    <!--Loading more pages notification-->
    <div align="center" ng-show="vm.isSecondLoaderNotificationVisible()">
        <b>Loading more pages...</b>
    </div>
</div>

<!--RETIRE/DELETE ALERTS-->
<delete-alert ng-show="vm.deleteClicked" on-update="vm.updateDeleteConfirmation(isConfirmed)" item-name="vm.deleteItem.name"></delete-alert>
<retire-alert ng-show="vm.retireClicked" on-update="vm.updateRetireConfirmation(retireReason, isConfirmed)" item-name="vm.retireItem.name"></retire-alert>